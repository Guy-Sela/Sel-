(()=>{document.addEventListener("DOMContentLoaded",function(){const Ie=document.getElementById("year");Ie&&(Ie.textContent=String(new Date().getFullYear()));const j={action:"https://docs.google.com/forms/u/0/d/e/1FAIpQLScDmwQ6ZhbM_FO2pltqidSyFOUC7C4yknLqtmz-b5GrtAHZ_A/formResponse",emailField:"entry.1523136379"};function nt(){const e="newsletter_hidden_iframe";let t=document.querySelector(`iframe[name="${e}"]`);t||(t=document.createElement("iframe"),t.name=e,t.tabIndex=-1,t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.border="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t));let n=document.getElementById("newsletterGoogleForm");if(!n){n=document.createElement("form"),n.id="newsletterGoogleForm",n.method="POST",n.action=j.action,n.target=e,n.style.position="absolute",n.style.left="-9999px",n.style.top="-9999px";const s=document.createElement("input");s.type="email",s.name=j.emailField,s.autocomplete="off",n.appendChild(s),document.body.appendChild(n)}const o=n.querySelector(`input[name="${CSS?.escape?CSS.escape(j.emailField):j.emailField}"]`);return{iframe:t,form:n,emailFieldEl:o}}function ot(e){e.preventDefault();const t=document.getElementById("newsletterEmail"),n=document.getElementById("newsletterStatus"),o=document.querySelector('#newsletterForm button[type="submit"]'),s=t?.value?.trim()||"";if(!t||!n)return!1;if(!s)return n.textContent="Please enter an email address.",n.className="contact-form-status error",!1;if(t.validity&&!t.validity.valid)return n.textContent="Please enter a valid email.",n.className="contact-form-status error",!1;n.textContent="Subscribing...",n.className="contact-form-status",o&&(o.disabled=!0);try{const{form:r,emailFieldEl:d}=nt();d&&(d.value=s),r.submit(),window.setTimeout(()=>{n.textContent="Thanks! You're on the list.",n.className="contact-form-status success",t.value="",o&&(o.disabled=!1),window.setTimeout(()=>{n.textContent="",n.className="contact-form-status"},4e3)},600)}catch{n.textContent="Unable to subscribe right now.",n.className="contact-form-status error",o&&(o.disabled=!1)}return!1}const Te=document.getElementById("newsletterForm");Te&&Te.addEventListener("submit",ot),function(){if(typeof Swiper>"u")return;new Swiper(".microdosing-carousel",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:3,initialSlide:0,loop:!1,coverflowEffect:{rotate:35,stretch:0,depth:350,modifier:1,scale:.85,slideShadows:!1},breakpoints:{0:{slidesPerView:1.15,spaceBetween:12,coverflowEffect:{rotate:18,stretch:0,depth:220,modifier:1,scale:.92,slideShadows:!1}},640:{slidesPerView:2,spaceBetween:18,coverflowEffect:{rotate:25,stretch:0,depth:260,modifier:1,scale:.9,slideShadows:!1}},1024:{slidesPerView:3,coverflowEffect:{rotate:35,stretch:0,depth:350,modifier:1,scale:.85,slideShadows:!1}}},pagination:{el:".microdosing-carousel .swiper-pagination",clickable:!0},keyboard:{enabled:!0}});function t(){const n=new Date,o=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),r=`${o}:${s}`,d=n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),f=n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),v=document.getElementById("mdGongTime"),p=document.getElementById("mdGongDate"),u=document.getElementById("mdInsightDate");v&&(v.textContent=r),p&&(p.textContent=d),u&&(u.textContent=f)}t(),setInterval(t,6e4)}(),function(){const t=document.getElementById("aboutTerminal"),n=document.getElementById("about"),o=document.getElementById("aboutTypedText"),s=document.getElementById("aboutCursor"),r=document.getElementById("aboutAsciiPre");if(!t||!n||!o||!s||!r)return;const d=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,f={classic:`-::::::-:.::..-........:...:....   ..               .::.......................::
-:::::-:::::::................  .                    ... ...................:.::
-:::--::-::::-..........                               .   ..........:........::
:-:---:::..:.:.......                                        ..................:
:-:::::...........                                              .........:....::
::::-:::.:......                                                ...............:
-:::::::........                                                    ............
-:::::::.......                                                    .............
:::.::....... ..                                                      .........:
::::.:......  .                                                        .........
:-::.........                                                           .......:
::::........                                                             .......
:::.......                                                                ......
:::......                                                                  .....
:...... .                                                                  .....
........                                                                    ....
.......                                ..:-==:::.                      .. ......
......                             .::--==+*+++===-:.                     .. ...
.....                             :-=-=-=-========--:..                      ...
.....                           .::::.:::-===-==---:::::                      ..
.....                          .:-:......::::::::::::=--:                     ..
.....                          .:::................:::-=:.                    ..
... .                          ..::..................::-:. .                   .
.....                         ....-:.................::::. .                  ..
....                  .       ...:::.................-:...                    ..
....                          .:=+---------:.::-:::::-=...                    ..
...                            -%*--=+*#*=+%#%+-=+=---=*+                      .
..                           .:--=.--==+*===:+=+**++=:-*=  ..                  .
..                           ::=.-::.::::=-..:+-::..:.:=-- ..                ...
....                         .:-:..:::::-:....:----::--:=:                    ..
...                           .:-.    .........:.......-:.                    ..
...              .             .-...............:.....::                     ...
....                            =:....::-=-::=+-::....-.                    ....
....                            --:.:===++----+*+=-:::-.                     ...
.....                           .-:::--::-:-----=--::-:                      ...
......   .                       :----....::::::::-:=-                     . ...
:...... ..                       .=+=::...:--:.::-+++...                     ...
:.........                     .=:.*=.::..:-:..::=#*:.....                 .....
:......... .  .      ..:....:::*%- :+:....::.:..:+*.==:........          .......
:::.........    .:-+*#%%%%%%%%%%@*...-. ..::....-=..#%#*+-:.. .   ..............
::::...... .:-=+#%@@@@@@@@@%%%%%%%-...:..:.:..-=:..=@%%%%%%#*+=-::.. .........:.
-:::...:.:=*%@@@@@@@@@@@@%@@%%%%%@+.........::....:#@%%%%%@@@@@%%%#+=:.......:::
-::::....#%%%%@@%%@@@@@@@@@%%%%%%%#:...     ......*@%%@@%%@@@@@@@@@@@%#+-:...:::
-:-::.:-+@%%%%%@@@@@@@@@@@%%%%%%%@*:....    .....=%%%@@@%%%@@@@@@@@@@@@@@#+-::::
--::-+#@@@%%%%%%%%@@@@@@@%%%%%%%@@#::....  .....-#@%%@@@@%%@@@@@@@@@@@@@@@@%#=-:
-:=*%@@@@@@@%%%@%%%%%@@@%#%%###%@%%=............=%%%%@@@%%#@@@@@@@@@@@@@@@@@@@#-
:=%@@@@@@@@@%%%@@@%%%%%%%%%%%##%%%%#:..........=%@%%%%%%%%%%@%@@@@@@@@@@@@@@%%@%
*%@@@@@@@@@@%%@@@@@@@%%%%%%@%*%%#%%@+...::....-%%%@%%%%%#%%%@@@@@@@@@@@@@%%@@@@@
@@@@@@@@@@@@@%@@@@@@@@@@@@@@%%@@%%%%%:.:---::-%%@@%#%@@@@%%%@@@%%%%%%%%%@%%@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%+:-==--=*%%%##%@@@@@@%%%%%%%%%%@@@@@%%@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@%%%@#-:-==++#%%%%@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%@#-:-=-=+%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#%%%%%=-----##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@%%@%%@#=-==*@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@%%@@@@@@@@%%@@%@%+:=*%@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@@@@@@%@@@%%%@@@@%*++#@%#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@@%@%%@@@%*#%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@%@@@@@%%@@@@@@@@@@@@@@@@%%@@@%%%%%%@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@
@@@@@@@@@%*%@@@@@%%@@@@@@@@%%%%@@@@%%@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@%+%@@@@@@@@%%@@@@%%%%@@@@@@%%@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`,dots:`. . . . . . . . .   .   .   .   .   .   .   .   .   .   .   .   .   .   . . .
 .   .   .   .
. . . . . . . . . .       .                               .   . . .   . . . . .

. . . . .   .   .   .   .   .       .       .       .   .   .   .   .   .   .

. . . . . .   .                                                       .   . . .

. . .   .   .   .       .       .       .       .       .       .   .   .   .

. .   .   .                                                               .   .
                                           .
.   .   .   .       .       .   .   . . . . . . . . .       .   .   .   .   .
                                         .   .   .   .
. .   .                         . .   .   . . . . . . . .                     .

.   .   .   .   .       .       . . .   .   .   .   . . .   .   .       .   .
                                ..   .   .   .   .   .
. .                           . . . . . . . . . . . . . . .               .
                               .         .     .       .
.   .   .   .   .   .   .   .   .   . . .   . . . . . . .   .   .   .   .   .

. .                             . . . . . . . . . . . .                       .
                                     .     .   . .
.   .   .   .   .   .   .   .   . . .   . . .   . . .   .   .   .   .   .   .
                                   .             ...
. .   . . .       . . . . . . . . . . . . . . . . . . . . .       .       .   .
               . .................                 ......... .
. . .   . . ....................... .   .   .   . . ............... . . .   . .
         ..........................              .........................
. . . ....................... ..... . .   . . . . ....... ................... .
  ..................................           .................................
............................. . .....   . . . . ... ... ........................
......................................   .   ...................................
..................................... . . . . ..................................
......................................   . .....................................
....................................... . . ....................................
........................................ .......................................
....................................... . ......................................
................................................................................
................................................................................`,minimal:`=====+==++=+++=++++++++=++++++++++++++++******+++++++=++++++++++++++++++++++++++
==========++==+++++++++++++++++++*+*+***************++++++++++++++++++++++++++==
========++++++++++++++++*+*****************************++++++++++++++++++++++++=
=======+++++++++++++++****************************************++++++++++++++++++
=======++++++++++++*********************************************++++++++++++++++
===++++++++++++++************************************************+++++++++++++++
+=++++++++++++++*****************************************************+++++++++++
===++++++++++++********************************************************+++++++++
===++++++++++***********************************************************++++++++
=+++++++++++*************************************************************+++++++
+++++++++*****************************************************************++++++
++++++++++**************************++++==---===+++********************+++++++++
++++++++**************************+===-=---:------===++*******************++++++
++++++*************************++===++====---=--========+*******************++++
+++++++************************+===+++++++++++++++++==--=+******************++++
+++++++***********************++++=+++++++++++++++++++===+*+****************++++
++++++****************+*******++++=++++++++++++++++++==+++++**************++++++
++++++*+**************+*******++--====--==============-==+++**************++++++
++++*++**********************++=::==--:::--:-.--::---=-.-++++*************++++++
++++*************************+=-+==++====-=++=--=====+=-==*++***************++++
+++++***********+************++==++++++++++++++===+++++==+**+*************+*++++
+++++++**********+*************+-+++++++++++++++++++++==++**+*************++++++
++++++**************************-=+++===--===-:--==+++=++++++**********+***+++++
++++++++************************+==+=-=========---====++++****************++++++
++++++++++++*********************+--==++++====+++=---=++++***+**********+*++++++
+++++++++++++++++**************+-++:-+=+++===++==-.:=+++++++++*+++**+***++++++++
=++++++++++++*+**+++==---------. -++==++++++++++=:-+::-==+++++++++++++++++++++++
==+++++++++++==-:..              .=+++++++++++===++-    ..::---==+++++++++++++++
-===+++++-:..                     :+++++++++++++++=     .         ..:-==+++++++=
=====++=-                         :=+++++*+++++++=.      .              .:-=++==
====-:.                   .  ..   .=++++++++++++=.       ..                 .:-=
==.                          ..    :=++++++++++=.         .                    .
:                           ..  .   :+++=+++++-         .                       
                             .       -+=--===:   ...                            
                               .     .===----..                                 
                                .    .-==-==:.                                  
                                .     .-=--: .                                  
                                       :--.  .                                  
                                       ...  .                                   
          .                                .                                    
         .-                                                                     `};let v="classic",p=f.classic,u=1,h=80;function U(c){if(!f[c])return;v=c;const m=f[c].split(`
`);for(;m.length&&m[0].trim()==="";)m.shift();for(;m.length&&m[m.length-1].trim()==="";)m.pop();p=m.join(`
`),u=m.length||1,h=Math.max(1,...m.map(y=>y.length)),document.querySelectorAll(".ascii-btn").forEach(y=>{y.classList.toggle("active",y.dataset.style===c)})}const X=fetch("ascii-profile.txt",{cache:"no-store"}).then(c=>c.ok?c.text():Promise.reject(new Error("classic ascii fetch failed"))).then(c=>{f.classic=c}).catch(()=>{}).finally(()=>{U("classic")});document.querySelectorAll(".ascii-btn").forEach(c=>{c.addEventListener("click",()=>{const l=c.dataset.style;l&&f[l]&&(U(l),r.textContent.length>0&&(r.textContent=p,C()))})});function A(c){s.classList.toggle("is-visible",!!c)}function w(c){return new Promise(l=>window.setTimeout(l,c))}function se(c){const l=document.createElement("span");l.textContent="M",l.style.position="absolute",l.style.visibility="hidden",l.style.whiteSpace="pre",l.style.fontFamily=getComputedStyle(c).fontFamily,l.style.fontSize=getComputedStyle(c).fontSize,l.style.fontWeight=getComputedStyle(c).fontWeight,l.style.letterSpacing=getComputedStyle(c).letterSpacing,l.style.lineHeight=getComputedStyle(c).lineHeight,document.body.appendChild(l);const m=l.getBoundingClientRect();return l.remove(),{cw:m.width||7,ch:m.height||12}}function C(){const c=r.closest(".term-editor");if(!c)return;const l=c.getBoundingClientRect(),m=window.innerHeight,y=Math.max(140,Math.floor(m-l.top-18));c.style.height=`${y}px`;const g=getComputedStyle(r),E=(parseFloat(g.paddingLeft)||0)+(parseFloat(g.paddingRight)||0),H=(parseFloat(g.paddingTop)||0)+(parseFloat(g.paddingBottom)||0),G=Math.max(240,l.width-E),k=Math.max(120,y-H);r.style.fontSize="12px",r.style.lineHeight="1.08";const{cw:Dt,ch:Bt}=se(r),Ot=G/(h*(Dt/12)),Rt=k/(u*(Bt/12)),Ft=Math.floor(Math.max(6,Math.min(Ot,Rt,24)));r.style.fontSize=`${Ft}px`}async function I(c,l,m={}){const y=m.minDelay??12,g=m.maxDelay??32,E=m.pausePunct??120,H=()=>Math.floor(y+Math.random()*(g-y));for(let G=0;G<l.length;G++){const k=l[G];c.append(k),c.appendChild(s),k==="."||k==="!"||k==="?"?await w(E+120):k===","||k===";"||k===":"?await w(E):await w(H())}c.appendChild(s)}async function Mt(c=3){for(let l=0;l<c;l++)A(!0),await w(520),A(!1),await w(480)}async function At(){r.textContent="";const c=p,l=12;for(let g=0;g<Math.min(l,c.length);g++)r.append(c[g]),await w(Math.random()*60+40);await w(600);let m=l,y=20;return new Promise(g=>{function E(){const H=Math.min(c.length,m+y);r.textContent=c.slice(0,H),m=H,y=Math.min(300,y+20),m>=c.length?(C(),g()):requestAnimationFrame(E)}requestAnimationFrame(E)})}async function Pt(){o.textContent="\u276F\xA0",o.appendChild(s),r.textContent="",A(!1),await Mt(5),await w(120),A(!1);try{await Promise.race([X,w(1200)])}catch{}const c=o;try{const E=window.__worldPop;E?.readyPromise&&await Promise.race([E.readyPromise,w(1200)])}catch{}const l={minDelay:30,maxDelay:60,pausePunct:120};await I(c,"Born 1977, Israel.",l),await w(800),await I(c," On a good day,",l),await w(600),await I(c," one in ",l);const m=window.__worldPop?.text||"\u2014";await I(c,m,{minDelay:40,maxDelay:80}),await I(c,".",l),window.__worldPop?.start?.(),await w(800),await I(c," On a bad day,",l),await w(600),await I(c," one of ",l);const y=window.__worldPop?.text||"\u2014";await I(c,y,{minDelay:40,maxDelay:80}),await I(c,".",l),await w(800),await I(c," Code for consciousness",l);const g=document.createElement("span");g.className="fake-tm",g.textContent="TM",c.appendChild(g),await w(1e3),await At(),C()}function Je(){o.innerHTML="";const c=window.__worldPop?.text||"\u2014",l="\u276F\xA0Born 1977, Israel. On a good day, one in "+c+". On a bad day, one of "+c+". Code for consciousness";o.appendChild(document.createTextNode(l));const m=document.createElement("span");m.className="fake-tm",m.textContent="TM",o.appendChild(m),o.appendChild(s),r.textContent=p,A(!1),C()}let re=!1;function et(){re||(re=!0,d?Je():Pt().catch(()=>Je()))}if(window.addEventListener("resize",()=>{re&&C()},{passive:!0}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{re&&C()}),!("IntersectionObserver"in window)){et();return}const tt=new IntersectionObserver(c=>{for(const l of c)if(l.isIntersecting){et(),tt.disconnect();break}},{threshold:.22});tt.observe(n)}(),function(){try{let r=function(u){o.text=u,Array.from(document.getElementsByClassName("worldPopCounter")).forEach(h=>{h.textContent=u})},p=function(){o.ready||(o.ready=!0,o._resolveReady?.(),o._resolveReady=null)};var t=r,n=p;const o=window.__worldPop=window.__worldPop||{text:"\u2014",ready:!1};o.readyPromise||(o.readyPromise=new Promise(u=>{o._resolveReady=u}));const s=`https://www.census.gov/popclock/data/population.php/world?_=${Date.now()}`;let d=NaN,f=NaN,v=null;o.start=()=>{v||!Number.isFinite(d)||!Number.isFinite(f)||(v=window.setInterval(()=>{d=Math.round(d+f),r(d.toLocaleString("en-US"))},1e3))},o.stop=()=>{v&&(window.clearInterval(v),v=null)},fetch(s,{cache:"no-store"}).then(u=>{if(!u.ok)throw new Error(`popclock HTTP ${u.status}`);return u.json()}).then(u=>{if(d=Number(u?.world?.population),f=Number(u?.world?.population_rate),!Number.isFinite(d)||!Number.isFinite(f))throw new Error("popclock payload shape");r(d.toLocaleString("en-US")),p()}).catch(()=>{r("unavailable"),p()})}catch{}}(),function(){const t=document.getElementById("pxsoul_latest_label"),n=document.getElementById("pxsoul_latest_body");if(!t||!n)return;const o="AIzaSyDIs9vxBTiXwxfsCOFrggLIxPnbRT-wX6E",s="pixelated-soul",r="America/Chicago";function d(p){try{return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:r}).format(p)}catch{return p.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}}function f(p,u){const h=p?.[u];return!h||typeof h!="object"?null:"stringValue"in h?h.stringValue:"integerValue"in h?Number(h.integerValue):"timestampValue"in h?h.timestampValue:"booleanValue"in h?!!h.booleanValue:null}async function v(){const p=`https://firestore.googleapis.com/v1/projects/${s}/databases/(default)/documents:runQuery?key=${o}`,h=await fetch(p,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({structuredQuery:{from:[{collectionId:"diary_entries"}],orderBy:[{field:{fieldPath:"createdAt"},direction:"DESCENDING"}],limit:1}})});if(!h.ok)throw new Error(`Firestore HTTP ${h.status}`);const U=await h.json(),X=(Array.isArray(U)?U?.[0]?.document:null)?.fields,A=f(X,"content"),w=f(X,"createdAt"),se=f(X,"dayIndex");if(!A||!w||typeof se!="number")throw new Error("Unexpected Firestore payload shape");const C=new Date(w);if(Number.isNaN(C.getTime()))throw new Error("Invalid createdAt timestamp");return{content:A,createdAt:C,dayIndex:se}}(async()=>{try{const p=await v();t.textContent=`Latest entry \u2022 ${d(p.createdAt)} \u2022 Day\xA0${p.dayIndex}`,n.textContent=p.content,n.parentElement?.setAttribute("aria-busy","false")}catch{t.textContent="Latest entry \u2022 unavailable",n.textContent="Unable to load the latest entry right now.",n.parentElement?.setAttribute("aria-busy","false")}})()}();const it={"semi-linear":{src:"meditativeclocks/clocks/semi-linear_clock_svg/index.html",title:"Semi-linear Clock",description:'Always the right time, never in the same way. The next "moment" is selected randomly.'},"ebb-flow":{src:"meditativeclocks/clocks/the_ebb_and_flow_of_time/index.html",title:"The Ebb and Flow of Time",description:"Possibly the most minimalistic clock ever made. Time is represented by a single circle, which, at intervals of twelve hours, either expands or contracts. At both extremes (12am, 12pm) it disappears altogether."},"past-present-future":{src:"meditativeclocks/clocks/present_past_and_future/index.html",title:"Present, Past and Future",description:"Our subjective grasp of time is very different from the rigid, conventional representation. In our minds we often wander between past, present and future, and so does this clock (it takes some time and close attention to see it)."},hourglass:{src:"meditativeclocks/clocks/abstract_hourglass/index.html",title:"Abstract Hourglass",description:"This one is self-explanatory."},universe:{src:"meditativeclocks/clocks/universe_clock/index.html",title:"Universe Clock",description:"The small triangle is time passed since the Big Bang. The large, open triangle is time left till the end of time. The scale is logarithmic\u2014the next pixel will appear in 86 billion years."},serendipity:{src:"meditativeclocks/clocks/serendipity/index.html",title:"Serendipity on Demand",description:"This clock utters a special sound, up to three times every 24 hours, at random intervals, thus connecting moments in life that otherwise wouldn't have been connected."}};let P=null,Le="",Ce="";function st(e){const t=it[e];if(!t)return;const n=document.getElementById("clockModal"),o=document.getElementById("modalIframe"),s=document.getElementById("modalTitle"),r=document.getElementById("modalDescription");if(!n||!o||!s||!r)return;if(P&&(clearTimeout(P),P=null),!n.classList.contains("active")){Le=document.body.style.overflow,Ce=document.body.style.paddingRight;const f=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",f>0&&(document.body.style.paddingRight=`${f}px`),n.classList.add("active")}o.classList.remove("loaded"),o.onload=null,o.onload=()=>{n.classList.contains("active")&&o.classList.add("loaded")};const d=t.src;requestAnimationFrame(()=>{o.src=d}),s.textContent=t.title,r.textContent=t.description}function ae(){const e=document.getElementById("clockModal"),t=document.getElementById("modalIframe");!e||!t||(t.onload=null,t.classList.remove("loaded"),e.classList.remove("active"),P&&clearTimeout(P),P=window.setTimeout(()=>{t.src="",P=null,document.body.style.overflow=Le,document.body.style.paddingRight=Ce},320))}(function(){const t=document.getElementById("clockModal");if(!t)return;const n=document.getElementById("clockModalClose");n&&n.addEventListener("click",ae),document.addEventListener("keydown",o=>{o.key==="Escape"&&ae()}),t.addEventListener("click",o=>{o.target&&o.target.id==="clockModal"&&ae()}),document.querySelectorAll("[data-clock]").forEach(o=>{o.addEventListener("click",()=>{const s=o.getAttribute("data-clock");s&&st(s)})})})(),function(){const t=document.getElementById("carouselTrack");if(!t)return;const n=t.querySelectorAll(".carousel-item"),o=document.querySelectorAll(".carousel-dot"),s=document.getElementById("carouselPrev"),r=document.getElementById("carouselNext");let d=0;function f(){t.style.transform=`translateX(-${d*100}%)`,o.forEach((u,h)=>u.classList.toggle("active",h===d))}function v(u){n.length&&(u<0&&(u=n.length-1),u>=n.length&&(u=0),d=u,f())}s?.addEventListener("click",()=>v(d-1)),r?.addEventListener("click",()=>v(d+1)),o.forEach(u=>{u.addEventListener("click",()=>v(parseInt(u.dataset.index)))});let p=0;t.addEventListener("touchstart",u=>{p=u.touches[0].clientX},{passive:!0}),t.addEventListener("touchend",u=>{const h=p-u.changedTouches[0].clientX;Math.abs(h)>50&&v(d+(h>0?1:-1))},{passive:!0}),f()}(),function(){const t=document.getElementById("works");if(!t)return;const n=Array.from(t.querySelectorAll("iframe.clock-preview-iframe"));if(!n.length)return;function o(){n.forEach(r=>{const d=r.getAttribute("data-src"),f=r.getAttribute("src")||"";d&&(f&&f!=="about:blank"||r.setAttribute("src",d))})}if(!("IntersectionObserver"in window)){o();return}const s=new IntersectionObserver(r=>{const d=r&&r[0];d&&d.isIntersecting&&(o(),s.disconnect())},{rootMargin:"2000px 0px 2000px 0px",threshold:0});s.observe(t)}();const i={startTime:Date.now(),lastActivity:Date.now(),lastClickTime:null,clicks:0,keysPressed:0,touches:0,lastKey:null,pointerX:0,pointerY:0,lastPointerX:0,lastPointerY:0,lastPointerTime:Date.now(),pointerVelocity:0,lastScrollY:0,scrollY:0,scrollDepth:0,scrollDir:null,viewport:"",orientation:"",netRequests:0,maxScrollY:0,clipboardEvents:0,selections:0,lastSelection:"",domMutations:0,elementsSeen:0,resizeEvents:0,longTasks:0,cumulativeLayoutShift:0,seenElements:new Set},rt=crypto.randomUUID?.()||Math.random().toString(36).substr(2,15);function at(e){return{m:document.getElementById("m_"+e),d:document.getElementById("d_"+e)}}function a(e,t){const n=at(e);n.m&&(n.m.textContent=t),n.d&&(n.d.textContent=t)}if(a("sessionId",rt.substring(0,8)),a("screen",`${screen.width}\xD7${screen.height}`),a("pixelRatio",window.devicePixelRatio.toFixed(1)+"x"),a("cpuCores",navigator.hardwareConcurrency||"\u2014"),a("deviceMemory",navigator.deviceMemory?navigator.deviceMemory+"GB":"\u2014"),a("platform",navigator.userAgentData?.platform||navigator.platform||"\u2014"),a("language",navigator.language),a("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone),a("themePref",window.matchMedia("(prefers-color-scheme: dark)").matches?"DARK":"LIGHT"),a("colorDepth",screen.colorDepth+"bit"),a("maxTouch",navigator.maxTouchPoints||0),a("reduceMotion",window.matchMedia("(prefers-reduced-motion: reduce)").matches?"YES":"NO"),a("historyLen",history.length),a("referrer",document.referrer||"direct"),navigator.storage?.estimate&&navigator.storage.estimate().then(e=>{const t=e.usage?(e.usage/1024/1024).toFixed(1)+"MB":"\u2014",n=e.quota?(e.quota/1024/1024/1024).toFixed(1)+"GB":"\u2014";a("storageUsed",t),a("storageQuota",n)}),window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(a("pageLoad",Math.round(e.loadEventEnd)+"ms"),a("domReady",Math.round(e.domContentLoadedEventEnd)+"ms")),performance.getEntriesByType("paint").forEach(n=>{n.name==="first-paint"&&a("firstPaint",Math.round(n.startTime)+"ms"),n.name==="first-contentful-paint"&&a("fcp",Math.round(n.startTime)+"ms")})},0)}),window.PerformanceObserver){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];a("lcp",Math.round(o.startTime)+"ms")}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.hadRecentInput||(i.cumulativeLayoutShift+=n.value,a("cls",i.cumulativeLayoutShift.toFixed(3)))}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{i.longTasks+=t.getEntries().length,a("longTasks",i.longTasks)}).observe({type:"longtask"})}catch{}}function ke(){if(performance.memory){const e=(performance.memory.usedJSHeapSize/1024/1024).toFixed(1);a("jsHeap",e+"MB")}}ke();function Z(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;a("connection",e?.effectiveType?.toUpperCase()||"\u2014"),a("online",navigator.onLine?"YES":"NO"),a("rtt",typeof e?.rtt=="number"?Math.round(e.rtt)+"ms":"\u2014")}Z(),window.addEventListener("online",Z),window.addEventListener("offline",Z),navigator.connection&&navigator.connection.addEventListener("change",Z);let ce=null,le=null;function ct(){ce===null&&(ce=Math.round(performance.now()),a("ttfs",ce+"ms"))}function lt(){le===null&&(le=Math.round(performance.now()),a("ttfi",le+"ms"))}if(["pointerdown","keydown","touchstart","mousedown"].forEach(e=>{window.addEventListener(e,lt,{capture:!0,once:!0,passive:!0})}),window.PerformanceObserver){try{new PerformanceObserver(t=>{i.netRequests+=t.getEntries().length}).observe({type:"resource",buffered:!0})}catch{}i.netRequests=performance.getEntriesByType("resource").length}function T(){i.lastActivity=Date.now()}function Me(e){const t=Math.round(e.clientX??e.touches?.[0]?.clientX??0),n=Math.round(e.clientY??e.touches?.[0]?.clientY??0),o=Date.now(),s=(o-i.lastPointerTime)/1e3;if(s>0){const r=t-i.lastPointerX,d=n-i.lastPointerY,f=Math.sqrt(r*r+d*d);i.pointerVelocity=Math.round(f/s)}i.pointerX=t,i.pointerY=n,i.lastPointerX=t,i.lastPointerY=n,i.lastPointerTime=o,T(),S(),fe&&window.clearTimeout(fe),fe=window.setTimeout(()=>{i.pointerVelocity=0,S()},160)}document.addEventListener("mousemove",Me),document.addEventListener("touchmove",Me),document.addEventListener("click",()=>{i.clicks++,i.lastClickTime=Date.now(),T(),S()}),document.addEventListener("keydown",e=>{i.keysPressed++,i.lastKey=e.key.length===1?e.key:`[${e.key}]`,T(),S()}),document.addEventListener("touchstart",()=>{i.touches++,T(),S()}),document.addEventListener("copy",()=>{i.clipboardEvents++,T(),S()}),document.addEventListener("paste",()=>{i.clipboardEvents++,T(),S()}),document.addEventListener("cut",()=>{i.clipboardEvents++,T(),S()}),document.addEventListener("selectionchange",()=>{const t=document.getSelection()?.toString().trim();t&&t!==i.lastSelection&&(i.selections++,i.lastSelection=t.substring(0,30)+(t.length>30?"...":""),T(),S())});function Ae(){i.viewport=`${window.innerWidth}\xD7${window.innerHeight}`,i.orientation=window.innerWidth>window.innerHeight?"LAND":"PORT",S()}Ae(),window.addEventListener("resize",()=>{Ae(),i.resizeEvents++});function dt(){a("fullscreen",document.fullscreenElement?"YES":"NO")}document.addEventListener("fullscreenchange",dt);function ut(){ct();const e=Math.round(window.scrollY),t=document.documentElement.scrollHeight-window.innerHeight,n=t>0?Math.round(e/t*100):0;e>i.lastScrollY?i.scrollDir="\u2193":e<i.lastScrollY&&(i.scrollDir="\u2191"),i.lastScrollY=e,i.scrollY=e,i.scrollDepth=n,e>i.maxScrollY&&(i.maxScrollY=e),T(),S()}document.addEventListener("scroll",ut,{passive:!0});function de(){a("tabFocus",document.hasFocus()?"YES":"NO")}function Pe(){a("visibility",document.visibilityState==="visible"?"YES":"NO")}de(),Pe(),window.addEventListener("focus",de),window.addEventListener("blur",de),document.addEventListener("visibilitychange",Pe);function ue(e){a("pageState",e)}document.addEventListener("freeze",()=>ue("FROZEN")),document.addEventListener("resume",()=>ue("ACTIVE")),document.addEventListener("visibilitychange",()=>{ue(document.visibilityState==="hidden"?"HIDDEN":"ACTIVE")}),new MutationObserver(e=>{i.domMutations+=e.length}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0});const mt=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&!i.seenElements.has(t.target)&&(i.seenElements.add(t.target),i.elementsSeen++)})},{threshold:.5});document.querySelectorAll("section, h1, h2, p, footer").forEach(e=>{mt.observe(e)});const D=document.getElementById("desktopHud"),ft=new ResizeObserver(()=>{i.resizeEvents++});D&&ft.observe(D);function pt(e){const t=Math.floor(e/1e3),n=String(Math.floor(t/3600)).padStart(2,"0"),o=String(Math.floor(t%3600/60)).padStart(2,"0"),s=String(t%60).padStart(2,"0");return`${n}:${o}:${s}`}var K=!0,me=0,fe=0;function pe(){return K&&document.visibilityState==="visible"}function N(){if(!pe())return;const e=Date.now();a("sessionTime",pt(e-i.startTime)),a("localTime",new Date().toLocaleTimeString());const t=Math.floor((e-i.lastActivity)/1e3);a("idleTime",t+"s"),a("pointerPos",`${i.pointerX}, ${i.pointerY}`),a("clicks",i.clicks),a("keysPressed",i.keysPressed),a("touches",i.touches),a("netRequests",i.netRequests),a("domMutations",i.domMutations),a("scrollY",i.scrollY+"px"),a("scrollDepth",i.scrollDepth+"%"),a("scrollDir",i.scrollDir||"\u2014"),a("viewport",i.viewport||`${window.innerWidth}\xD7${window.innerHeight}`),a("orientation",i.orientation||(window.innerWidth>window.innerHeight?"LAND":"PORT")),a("pointerVelocity",i.pointerVelocity+" px/s"),a("lastKey",i.lastKey||"\u2014"),a("lastClickTime",i.lastClickTime?Math.floor((e-i.lastClickTime)/1e3)+"s ago":"\u2014"),a("clipboardEvents",i.clipboardEvents),a("selections",i.selections),a("elementsSeen",i.elementsSeen),a("resizeEvents",i.resizeEvents),a("lastSelection",i.lastSelection||"\u2014"),ke()}function S(){pe()&&(me||(me=requestAnimationFrame(()=>{me=0,N()})))}(function(){const t=document.getElementById("heroLayer");if(!t||!("IntersectionObserver"in window))return;new IntersectionObserver(o=>{const s=o&&o[0],r=!!(s&&s.isIntersecting&&s.intersectionRatio>.12);r!==K&&(K=r,K&&N())},{threshold:[0,.12,.25,.5]}).observe(t)})(),window.setInterval(()=>{pe()&&N()},1e3),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&N()}),N();const Q=document.getElementById("hudToggle");let _=!0;function J(){if(_&&D){const e=D.offsetHeight;Q.style.top=e+8+"px"}else Q.style.top="0.5rem"}J(),Q.addEventListener("click",()=>{_=!_,D.classList.toggle("collapsed",!_),Q.textContent=_?"[HIDE]":"[SHOW]",J()}),window.addEventListener("resize",J),D&&new ResizeObserver(J).observe(D);const L=document.getElementById("stickyNav"),Y=document.getElementById("works"),B=document.getElementById("dissolve-container"),De=document.getElementById("reveal"),O=document.getElementById("revealText");let ee=0,q=!1,Be=!1,Oe=!1,he=null;const ht=5e3;let R=null;function Re(){const e=!!(Be||Oe);e!==q&&(q=e,q?vt():L?.classList.remove("visible"))}function Fe(){L&&L.classList.contains("visible")&&(R&&window.clearTimeout(R),R=window.setTimeout(()=>{L.classList.remove("visible")},ht))}function wt(){R&&(window.clearTimeout(R),R=null)}function vt(){L&&(he&&window.clearTimeout(he),he=window.setTimeout(()=>{q&&(L.classList.add("visible"),Fe())},0))}const yt=Array.from(document.querySelectorAll("#stickyNav [data-nav]")),b=document.querySelector("#aboutTerminal .about-terminal-embed");let He=!1,Ne=!1,M=!1,V="works";function _e(){if(He||!b)return;const e=b.getAttribute("data-src");e&&(b.addEventListener("load",function t(){b.removeEventListener("load",t),b.classList.add("loaded")}),b.src=e,He=!0)}(function(){const t=document.getElementById("about");if(!t||!("IntersectionObserver"in window))return;const n=new IntersectionObserver(o=>{o[0]?.isIntersecting&&(_e(),n.disconnect())},{rootMargin:"600px 0px 600px 0px",threshold:0});n.observe(t)})();function Ye(){if(M||!b)return!1;try{const e=b.contentWindow;if(e&&typeof e.__startCombinedTerminal=="function")return e.__startCombinedTerminal(),M=!0,!0}catch{}try{b.contentWindow?.postMessage({type:"START_TERMINAL_ANSI_COMBINED"},"*")}catch{}return!1}function we(){if(M||!b||Ye())return;const t=2500,n=100,o=Date.now();(function s(){M||V==="about"&&(Date.now()-o>t||Ye()||window.setTimeout(s,n))})()}function Nt(){if(Ne||M||!b)return;Ne=!0;let e=!1;b.addEventListener("load",()=>{V==="about"&&(M||e&&we())});let t=0;function n(){if(t=0,M)return;if(V!=="about"){t=requestAnimationFrame(n);return}const o=b.getBoundingClientRect(),s=window.innerHeight*.5;if(!e&&o.top<=s&&o.bottom>0){e=!0,!M&&V==="about"&&we();return}t=requestAnimationFrame(n)}t=requestAnimationFrame(n)}function qe(e){V=e,yt.forEach(t=>t.classList.toggle("active",t.getAttribute("data-nav")===e)),e==="about"&&(_e(),we())}qe("works"),function(){if(!("IntersectionObserver"in window))return;const t=new IntersectionObserver(o=>{const s=o[0];Be=!s.isIntersecting&&s.boundingClientRect.top<0,Re()},{threshold:0});if(De&&t.observe(De),Y){const o=Y;new IntersectionObserver(r=>{const d=r&&r[0];d&&(d.isIntersecting?Y.classList.add("works-visible"):Y.classList.remove("works-visible"),Oe=!!d.isIntersecting,Re())},{rootMargin:"-33% 0px -66% 0px",threshold:0}).observe(o)}const n=new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&s.intersectionRatio>.15&&qe(s.target.id)})},{rootMargin:"0px 0px -20% 0px",threshold:[.15,.3]});["works","about","contact"].forEach(o=>{const s=document.getElementById(o);s&&n.observe(s)})}();function ve(e){let t=0;return function(...o){t||(t=requestAnimationFrame(()=>{t=0,e.apply(this,o)}))}}const gt=O.getBoundingClientRect().top+window.scrollY+O.offsetHeight;let ye=0;function bt(){const e=window.scrollY,t=window.innerHeight*.33;if(B){const n=B.getBoundingClientRect();if(n.bottom>0&&n.top<window.innerHeight){O.classList.remove("hidden"),ye=e;return}}e>gt-t&&e>ye?O.classList.add("hidden"):O.classList.remove("hidden"),ye=e}const Et=ve(bt);window.addEventListener("scroll",Et,{passive:!0});let F=window.scrollY,Ve=0,ze=F,ge=0,te=!1;window.addEventListener("touchstart",()=>{te=!0},{passive:!0}),window.addEventListener("touchend",()=>{te=!1},{passive:!0}),window.addEventListener("touchcancel",()=>{te=!1},{passive:!0});function St(){const e=window.scrollY;if(!q){F=e,ee=e;return}const t=e-F;if(Math.abs(t)<4)return;const n=t>0?1:-1;if(n!==Ve&&(Ve=n,ze=e),Math.abs(e-ze)<24){F=e,ee=e;return}if(n>0)L.classList.contains("visible")||(L.classList.add("visible"),Y?.classList.add("works-visible"),ge=Date.now()),Fe();else{const s=ge&&Date.now()-ge<450,r=!!(window.matchMedia&&window.matchMedia("(pointer: coarse)").matches);if(s||r&&!te){F=e,ee=e;return}L.classList.remove("visible"),wt()}F=e,ee=e}const xt=ve(St);window.addEventListener("scroll",xt,{passive:!0});const ne=document.getElementById("heroHud"),Yt=document.getElementById("reveal"),be=document.getElementById("heroLayer"),z=document.getElementById("revealLayer"),x=ne?.querySelector(".hud-container");let Ee=1;function It(){if(!ne||!x)return;const e=getComputedStyle(ne),t=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),n=ne.clientHeight-t;if(n<=0)return;const s=(x.getBoundingClientRect().height||0)/(Ee||1);if(s<=0)return;let r=n/s;if(r=Math.min(1,Math.max(.55,r)),Math.abs(r-Ee)<.01)return;Ee=r,typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("zoom","1")?(x.style.zoom=String(r),x.style.transform="",x.style.width=""):(x.style.zoom="",x.style.transformOrigin="top center",x.style.transform=`scale(${r})`,x.style.width=`${100/r}%`)}function oe(){requestAnimationFrame(()=>requestAnimationFrame(It))}window.addEventListener("resize",oe),document.fonts?.ready?.then(oe),window.ResizeObserver&&x&&new ResizeObserver(oe).observe(x),oe();let Se=window.innerHeight,$e=window.innerHeight,$=0,xe=1,We=1,ie=!1;function Tt(){return window.visualViewport?.height||window.innerHeight}function Ue(e){return e<0?0:e>1?1:e}function Lt(e){return e*e*(3-2*e)}function W(e){const t=Ue(e);be.style.opacity=String(1-t),z.style.opacity=String(t),t>=1?z.classList.add("active"):z.classList.remove("active")}function Xe(){if(!B)return;Se=Tt();const e=B.offsetHeight||0,t=Math.max(1,e-Se);$e=Math.min(Se,t),$=B.getBoundingClientRect().top+window.scrollY,xe=$+$e,We=1/Math.max(1,xe-$)}function Ge(){const t=(window.scrollY-$)*We,n=Lt(Ue(t));W(n)}const je=ve(Ge);function Ze(){ie||(ie=!0,window.addEventListener("scroll",je,{passive:!0}),be.style.willChange="opacity",z.style.willChange="opacity")}function Ct(){ie&&(ie=!1,window.removeEventListener("scroll",je),be.style.willChange="",z.style.willChange="")}function Ke(){const e=window.scrollY;e<=$?W(0):e>=xe?W(1):Ge()}function Qe(){Xe(),Ke()}Qe(),window.addEventListener("resize",Qe,{passive:!0}),"IntersectionObserver"in window&&B?new IntersectionObserver(t=>{const n=t&&t[0];n&&(n.isIntersecting?(Xe(),Ze(),Ke()):(Ct(),n.boundingClientRect.top<0?W(1):W(0)))},{rootMargin:"200px 0px 200px 0px",threshold:0}).observe(B):Ze()});})();
