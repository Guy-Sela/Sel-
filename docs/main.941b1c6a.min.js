(()=>{document.addEventListener("DOMContentLoaded",function(){const Le=document.getElementById("year");Le&&(Le.textContent=String(new Date().getFullYear()));const K={action:"https://docs.google.com/forms/u/0/d/e/1FAIpQLScDmwQ6ZhbM_FO2pltqidSyFOUC7C4yknLqtmz-b5GrtAHZ_A/formResponse",emailField:"entry.1523136379"};function st(){const e="newsletter_hidden_iframe";let t=document.querySelector(`iframe[name="${e}"]`);t||(t=document.createElement("iframe"),t.name=e,t.tabIndex=-1,t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.border="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t));let n=document.getElementById("newsletterGoogleForm");if(!n){n=document.createElement("form"),n.id="newsletterGoogleForm",n.method="POST",n.action=K.action,n.target=e,n.style.position="absolute",n.style.left="-9999px",n.style.top="-9999px";const r=document.createElement("input");r.type="email",r.name=K.emailField,r.autocomplete="off",n.appendChild(r),document.body.appendChild(n)}const o=n.querySelector(`input[name="${CSS?.escape?CSS.escape(K.emailField):K.emailField}"]`);return{iframe:t,form:n,emailFieldEl:o}}function rt(e){e.preventDefault();const t=document.getElementById("newsletterEmail"),n=document.getElementById("newsletterStatus"),o=document.querySelector('#newsletterForm button[type="submit"]'),r=t?.value?.trim()||"";if(!t||!n)return!1;if(!r)return n.textContent="Please enter an email address.",n.className="contact-form-status error",!1;if(t.validity&&!t.validity.valid)return n.textContent="Please enter a valid email.",n.className="contact-form-status error",!1;n.textContent="Subscribing...",n.className="contact-form-status",o&&(o.disabled=!0);try{const{form:s,emailFieldEl:l}=st();l&&(l.value=r),s.submit(),window.setTimeout(()=>{n.textContent="Thanks! You're on the list.",n.className="contact-form-status success",t.value="",o&&(o.disabled=!1),window.setTimeout(()=>{n.textContent="",n.className="contact-form-status"},4e3)},600)}catch{n.textContent="Unable to subscribe right now.",n.className="contact-form-status error",o&&(o.disabled=!1)}return!1}const Ce=document.getElementById("newsletterForm");Ce&&Ce.addEventListener("submit",rt),function(){if(typeof Swiper>"u")return;const t=document.querySelector(".microdosing-carousel");if(!t)return;let n=!1;function o(){n||(n=!0,new Swiper(".microdosing-carousel",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:3,initialSlide:0,loop:!1,coverflowEffect:{rotate:35,stretch:0,depth:350,modifier:1,scale:.85,slideShadows:!1},breakpoints:{0:{slidesPerView:1.15,spaceBetween:12,coverflowEffect:{rotate:18,stretch:0,depth:220,modifier:1,scale:.92,slideShadows:!1}},640:{slidesPerView:2,spaceBetween:18,coverflowEffect:{rotate:25,stretch:0,depth:260,modifier:1,scale:.9,slideShadows:!1}},1024:{slidesPerView:3,coverflowEffect:{rotate:35,stretch:0,depth:350,modifier:1,scale:.85,slideShadows:!1}}},pagination:{el:".microdosing-carousel .swiper-pagination",clickable:!0},keyboard:{enabled:!0}}))}const r=new IntersectionObserver(l=>{l[0].isIntersecting&&(o(),r.disconnect())},{rootMargin:"300px"});r.observe(t);function s(){const l=new Date,u=String(l.getHours()).padStart(2,"0"),v=String(l.getMinutes()).padStart(2,"0"),p=`${u}:${v}`,m=l.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),h=l.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),y=document.getElementById("mdGongTime"),w=document.getElementById("mdGongDate"),b=document.getElementById("mdInsightDate");y&&(y.textContent=p),w&&(w.textContent=m),b&&(b.textContent=h)}s(),setInterval(s,6e4)}(),function(){const t=document.getElementById("aboutTerminal"),n=document.getElementById("about"),o=document.getElementById("aboutTypedText"),r=document.getElementById("aboutCursor"),s=document.getElementById("aboutAsciiPre");if(!t||!n||!o||!r||!s)return;const l=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,u={classic:`-::::::-:.::..-........:...:....   ..               .::.......................::
-:::::-:::::::................  .                    ... ...................:.::
-:::--::-::::-..........                               .   ..........:........::
:-:---:::..:.:.......                                        ..................:
:-:::::...........                                              .........:....::
::::-:::.:......                                                ...............:
-:::::::........                                                    ............
-:::::::.......                                                    .............
:::.::....... ..                                                      .........:
::::.:......  .                                                        .........
:-::.........                                                           .......:
::::........                                                             .......
:::.......                                                                ......
:::......                                                                  .....
:...... .                                                                  .....
........                                                                    ....
.......                                ..:-==:::.                      .. ......
......                             .::--==+*+++===-:.                     .. ...
.....                             :-=-=-=-========--:..                      ...
.....                           .::::.:::-===-==---:::::                      ..
.....                          .:-:......::::::::::::=--:                     ..
.....                          .:::................:::-=:.                    ..
... .                          ..::..................::-:. .                   .
.....                         ....-:.................::::. .                  ..
....                  .       ...:::.................-:...                    ..
....                          .:=+---------:.::-:::::-=...                    ..
...                            -%*--=+*#*=+%#%+-=+=---=*+                      .
..                           .:--=.--==+*===:+=+**++=:-*=  ..                  .
..                           ::=.-::.::::=-..:+-::..:.:=-- ..                ...
....                         .:-:..:::::-:....:----::--:=:                    ..
...                           .:-.    .........:.......-:.                    ..
...              .             .-...............:.....::                     ...
....                            =:....::-=-::=+-::....-.                    ....
....                            --:.:===++----+*+=-:::-.                     ...
.....                           .-:::--::-:-----=--::-:                      ...
......   .                       :----....::::::::-:=-                     . ...
:...... ..                       .=+=::...:--:.::-+++...                     ...
:.........                     .=:.*=.::..:-:..::=#*:.....                 .....
:......... .  .      ..:....:::*%- :+:....::.:..:+*.==:........          .......
:::.........    .:-+*#%%%%%%%%%%@*...-. ..::....-=..#%#*+-:.. .   ..............
::::...... .:-=+#%@@@@@@@@@%%%%%%%-...:..:.:..-=:..=@%%%%%%#*+=-::.. .........:.
-:::...:.:=*%@@@@@@@@@@@@%@@%%%%%@+.........::....:#@%%%%%@@@@@%%%#+=:.......:::
-::::....#%%%%@@%%@@@@@@@@@%%%%%%%#:...     ......*@%%@@%%@@@@@@@@@@@%#+-:...:::
-:-::.:-+@%%%%%@@@@@@@@@@@%%%%%%%@*:....    .....=%%%@@@%%%@@@@@@@@@@@@@@#+-::::
--::-+#@@@%%%%%%%%@@@@@@@%%%%%%%@@#::....  .....-#@%%@@@@%%@@@@@@@@@@@@@@@@%#=-:
-:=*%@@@@@@@%%%@%%%%%@@@%#%%###%@%%=............=%%%%@@@%%#@@@@@@@@@@@@@@@@@@@#-
:=%@@@@@@@@@%%%@@@%%%%%%%%%%%##%%%%#:..........=%@%%%%%%%%%%@%@@@@@@@@@@@@@@%%@%
*%@@@@@@@@@@%%@@@@@@@%%%%%%@%*%%#%%@+...::....-%%%@%%%%%#%%%@@@@@@@@@@@@@%%@@@@@
@@@@@@@@@@@@@%@@@@@@@@@@@@@@%%@@%%%%%:.:---::-%%@@%#%@@@@%%%@@@%%%%%%%%%@%%@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%+:-==--=*%%%##%@@@@@@%%%%%%%%%%@@@@@%%@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@%%%@#-:-==++#%%%%@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%@#-:-=-=+%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#%%%%%=-----##%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@%%@%%@#=-==*@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@%%@@@@@@@@%%@@%@%+:=*%@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@@@@@@@@@@%@@@%%%@@@@%*++#@%#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@@%@%%@@@%*#%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@%@@@@@%%@@@@@@@@@@@@@@@@%%@@@%%%%%%@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@
@@@@@@@@@%*%@@@@@%%@@@@@@@@%%%%@@@@%%@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@%+%@@@@@@@@%%@@@@%%%%@@@@@@%%@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`,dots:`. . . . . . . . .   .   .   .   .   .   .   .   .   .   .   .   .   .   . . .
 .   .   .   .
. . . . . . . . . .       .                               .   . . .   . . . . .

. . . . .   .   .   .   .   .       .       .       .   .   .   .   .   .   .

. . . . . .   .                                                       .   . . .

. . .   .   .   .       .       .       .       .       .       .   .   .   .

. .   .   .                                                               .   .
                                           .
.   .   .   .       .       .   .   . . . . . . . . .       .   .   .   .   .
                                         .   .   .   .
. .   .                         . .   .   . . . . . . . .                     .

.   .   .   .   .       .       . . .   .   .   .   . . .   .   .       .   .
                                ..   .   .   .   .   .
. .                           . . . . . . . . . . . . . . .               .
                               .         .     .       .
.   .   .   .   .   .   .   .   .   . . .   . . . . . . .   .   .   .   .   .

. .                             . . . . . . . . . . . .                       .
                                     .     .   . .
.   .   .   .   .   .   .   .   . . .   . . .   . . .   .   .   .   .   .   .
                                   .             ...
. .   . . .       . . . . . . . . . . . . . . . . . . . . .       .       .   .
               . .................                 ......... .
. . .   . . ....................... .   .   .   . . ............... . . .   . .
         ..........................              .........................
. . . ....................... ..... . .   . . . . ....... ................... .
  ..................................           .................................
............................. . .....   . . . . ... ... ........................
......................................   .   ...................................
..................................... . . . . ..................................
......................................   . .....................................
....................................... . . ....................................
........................................ .......................................
....................................... . ......................................
................................................................................
................................................................................`,minimal:`=====+==++=+++=++++++++=++++++++++++++++******+++++++=++++++++++++++++++++++++++
==========++==+++++++++++++++++++*+*+***************++++++++++++++++++++++++++==
========++++++++++++++++*+*****************************++++++++++++++++++++++++=
=======+++++++++++++++****************************************++++++++++++++++++
=======++++++++++++*********************************************++++++++++++++++
===++++++++++++++************************************************+++++++++++++++
+=++++++++++++++*****************************************************+++++++++++
===++++++++++++********************************************************+++++++++
===++++++++++***********************************************************++++++++
=+++++++++++*************************************************************+++++++
+++++++++*****************************************************************++++++
++++++++++**************************++++==---===+++********************+++++++++
++++++++**************************+===-=---:------===++*******************++++++
++++++*************************++===++====---=--========+*******************++++
+++++++************************+===+++++++++++++++++==--=+******************++++
+++++++***********************++++=+++++++++++++++++++===+*+****************++++
++++++****************+*******++++=++++++++++++++++++==+++++**************++++++
++++++*+**************+*******++--====--==============-==+++**************++++++
++++*++**********************++=::==--:::--:-.--::---=-.-++++*************++++++
++++*************************+=-+==++====-=++=--=====+=-==*++***************++++
+++++***********+************++==++++++++++++++===+++++==+**+*************+*++++
+++++++**********+*************+-+++++++++++++++++++++==++**+*************++++++
++++++**************************-=+++===--===-:--==+++=++++++**********+***+++++
++++++++************************+==+=-=========---====++++****************++++++
++++++++++++*********************+--==++++====+++=---=++++***+**********+*++++++
+++++++++++++++++**************+-++:-+=+++===++==-.:=+++++++++*+++**+***++++++++
=++++++++++++*+**+++==---------. -++==++++++++++=:-+::-==+++++++++++++++++++++++
==+++++++++++==-:..              .=+++++++++++===++-    ..::---==+++++++++++++++
-===+++++-:..                     :+++++++++++++++=     .         ..:-==+++++++=
=====++=-                         :=+++++*+++++++=.      .              .:-=++==
====-:.                   .  ..   .=++++++++++++=.       ..                 .:-=
==.                          ..    :=++++++++++=.         .                    .
:                           ..  .   :+++=+++++-         .                       
                             .       -+=--===:   ...                            
                               .     .===----..                                 
                                .    .-==-==:.                                  
                                .     .-=--: .                                  
                                       :--.  .                                  
                                       ...  .                                   
          .                                .                                    
         .-                                                                     `};let v="classic",p=u.classic,m=1,h=80;function y(c){if(!u[c])return;v=c;const f=u[c].split(`
`);for(;f.length&&f[0].trim()==="";)f.shift();for(;f.length&&f[f.length-1].trim()==="";)f.pop();p=f.join(`
`),m=f.length||1,h=Math.max(1,...f.map(E=>E.length)),document.querySelectorAll(".ascii-btn").forEach(E=>{E.classList.toggle("active",E.dataset.style===c)})}const b=fetch("ascii-profile.txt",{cache:"no-store"}).then(c=>c.ok?c.text():Promise.reject(new Error("classic ascii fetch failed"))).then(c=>{u.classic=c}).catch(()=>{}).finally(()=>{y("classic")});document.querySelectorAll(".ascii-btn").forEach(c=>{c.addEventListener("click",()=>{const d=c.dataset.style;d&&u[d]&&(y(d),s.textContent.length>0&&(s.textContent=p,A()))})});function B(c){r.classList.toggle("is-visible",!!c)}function g(c){return new Promise(d=>window.setTimeout(d,c))}function ae(c){const d=document.createElement("span");d.textContent="M",d.style.position="absolute",d.style.visibility="hidden",d.style.whiteSpace="pre",d.style.fontFamily=getComputedStyle(c).fontFamily,d.style.fontSize=getComputedStyle(c).fontSize,d.style.fontWeight=getComputedStyle(c).fontWeight,d.style.letterSpacing=getComputedStyle(c).letterSpacing,d.style.lineHeight=getComputedStyle(c).lineHeight,document.body.appendChild(d);const f=d.getBoundingClientRect();return d.remove(),{cw:f.width||7,ch:f.height||12}}function A(){const c=s.closest(".term-editor");if(!c)return;const d=c.getBoundingClientRect(),f=window.innerHeight,E=Math.max(140,Math.floor(f-d.top-18));c.style.height=`${E}px`;const S=getComputedStyle(s),I=(parseFloat(S.paddingLeft)||0)+(parseFloat(S.paddingRight)||0),Y=(parseFloat(S.paddingTop)||0)+(parseFloat(S.paddingBottom)||0),Z=Math.max(240,d.width-I),P=Math.max(120,E-Y);s.style.fontSize="12px",s.style.lineHeight="1.08";const{cw:Ot,ch:Rt}=ae(s),Ht=Z/(h*(Ot/12)),Ft=P/(m*(Rt/12)),Nt=Math.floor(Math.max(6,Math.min(Ht,Ft,24)));s.style.fontSize=`${Nt}px`}async function C(c,d,f={}){const E=f.minDelay??12,S=f.maxDelay??32,I=f.pausePunct??120,Y=()=>Math.floor(E+Math.random()*(S-E));for(let Z=0;Z<d.length;Z++){const P=d[Z];c.append(P),c.appendChild(r),P==="."||P==="!"||P==="?"?await g(I+120):P===","||P===";"||P===":"?await g(I):await g(Y())}c.appendChild(r)}async function Pt(c=3){for(let d=0;d<c;d++)B(!0),await g(520),B(!1),await g(480)}async function Dt(){s.textContent="";const c=p,d=12;for(let S=0;S<Math.min(d,c.length);S++)s.append(c[S]),await g(Math.random()*60+40);await g(600);let f=d,E=20;return new Promise(S=>{function I(){const Y=Math.min(c.length,f+E);s.textContent=c.slice(0,Y),f=Y,E=Math.min(300,E+20),f>=c.length?(A(),S()):requestAnimationFrame(I)}requestAnimationFrame(I)})}async function Bt(){o.textContent="\u276F\xA0",o.appendChild(r),s.textContent="",B(!1),await Pt(5),await g(120),B(!1);try{await Promise.race([b,g(1200)])}catch{}const c=o;try{const I=window.__worldPop;I?.readyPromise&&await Promise.race([I.readyPromise,g(1200)])}catch{}const d={minDelay:30,maxDelay:60,pausePunct:120};await C(c,"Born 1977, Israel.",d),await g(800),await C(c," On a good day,",d),await g(600),await C(c," one in ",d);const f=window.__worldPop?.text||"\u2014";await C(c,f,{minDelay:40,maxDelay:80}),await C(c,".",d),window.__worldPop?.start?.(),await g(800),await C(c," On a bad day,",d),await g(600),await C(c," one of ",d);const E=window.__worldPop?.text||"\u2014";await C(c,E,{minDelay:40,maxDelay:80}),await C(c,".",d),await g(800),await C(c," Code for consciousness",d);const S=document.createElement("span");S.className="fake-tm",S.textContent="TM",c.appendChild(S),await g(1e3),await Dt(),A()}function nt(){o.innerHTML="";const c=window.__worldPop?.text||"\u2014",d="\u276F\xA0Born 1977, Israel. On a good day, one in "+c+". On a bad day, one of "+c+". Code for consciousness";o.appendChild(document.createTextNode(d));const f=document.createElement("span");f.className="fake-tm",f.textContent="TM",o.appendChild(f),o.appendChild(r),s.textContent=p,B(!1),A()}let ce=!1;function ot(){ce||(ce=!0,l?nt():Bt().catch(()=>nt()))}if(window.addEventListener("resize",()=>{ce&&A()},{passive:!0}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{ce&&A()}),!("IntersectionObserver"in window)){ot();return}const it=new IntersectionObserver(c=>{for(const d of c)if(d.isIntersecting){ot(),it.disconnect();break}},{rootMargin:"100px 0px 0px 0px",threshold:.08});it.observe(n)}(),function(){try{let s=function(m){o.text=m,Array.from(document.getElementsByClassName("worldPopCounter")).forEach(h=>{h.textContent=m})},p=function(){o.ready||(o.ready=!0,o._resolveReady?.(),o._resolveReady=null)};var t=s,n=p;const o=window.__worldPop=window.__worldPop||{text:"\u2014",ready:!1};o.readyPromise||(o.readyPromise=new Promise(m=>{o._resolveReady=m}));const r=`https://www.census.gov/popclock/data/population.php/world?_=${Date.now()}`;let l=NaN,u=NaN,v=null;o.start=()=>{v||!Number.isFinite(l)||!Number.isFinite(u)||(v=window.setInterval(()=>{l=Math.round(l+u),s(l.toLocaleString("en-US"))},1e3))},o.stop=()=>{v&&(window.clearInterval(v),v=null)},fetch(r,{cache:"no-store"}).then(m=>{if(!m.ok)throw new Error(`popclock HTTP ${m.status}`);return m.json()}).then(m=>{if(l=Number(m?.world?.population),u=Number(m?.world?.population_rate),!Number.isFinite(l)||!Number.isFinite(u))throw new Error("popclock payload shape");s(l.toLocaleString("en-US")),p()}).catch(()=>{s("unavailable"),p()})}catch{}}(),function(){const t=document.getElementById("pxsoul_latest_label"),n=document.getElementById("pxsoul_latest_body");if(!t||!n)return;const o="AIzaSyDIs9vxBTiXwxfsCOFrggLIxPnbRT-wX6E",r="pixelated-soul",s="America/Chicago";function l(p){try{return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:s}).format(p)}catch{return p.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}}function u(p,m){const h=p?.[m];return!h||typeof h!="object"?null:"stringValue"in h?h.stringValue:"integerValue"in h?Number(h.integerValue):"timestampValue"in h?h.timestampValue:"booleanValue"in h?!!h.booleanValue:null}async function v(){const p=`https://firestore.googleapis.com/v1/projects/${r}/databases/(default)/documents:runQuery?key=${o}`,h=await fetch(p,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({structuredQuery:{from:[{collectionId:"diary_entries"}],orderBy:[{field:{fieldPath:"createdAt"},direction:"DESCENDING"}],limit:1}})});if(!h.ok)throw new Error(`Firestore HTTP ${h.status}`);const y=await h.json(),b=(Array.isArray(y)?y?.[0]?.document:null)?.fields,B=u(b,"content"),g=u(b,"createdAt"),ae=u(b,"dayIndex");if(!B||!g||typeof ae!="number")throw new Error("Unexpected Firestore payload shape");const A=new Date(g);if(Number.isNaN(A.getTime()))throw new Error("Invalid createdAt timestamp");return{content:B,createdAt:A,dayIndex:ae}}(async()=>{try{const p=await v();t.textContent=`Latest entry \u2022 ${l(p.createdAt)} \u2022 Day\xA0${p.dayIndex}`,n.textContent=p.content,n.parentElement?.setAttribute("aria-busy","false")}catch{t.textContent="Latest entry \u2022 unavailable",n.textContent="Unable to load the latest entry right now.",n.parentElement?.setAttribute("aria-busy","false")}})()}();const at={"semi-linear":{src:"meditativeclocks/clocks/semi-linear_clock_svg/index.html",title:"Semi-linear Clock",description:'Always the right time, never in the same way. The next "moment" is selected randomly.'},"ebb-flow":{src:"meditativeclocks/clocks/the_ebb_and_flow_of_time/index.html",title:"The Ebb and Flow of Time",description:"Possibly the most minimalistic clock ever made. Time is represented by a single circle, which, at intervals of twelve hours, either expands or contracts. At both extremes (12am, 12pm) it disappears altogether."},"past-present-future":{src:"meditativeclocks/clocks/present_past_and_future/index.html",title:"Present, Past and Future",description:"Our subjective grasp of time is very different from the rigid, conventional representation. In our minds we often wander between past, present and future, and so does this clock (it takes some time and close attention to see it)."},hourglass:{src:"meditativeclocks/clocks/abstract_hourglass/index.html",title:"Abstract Hourglass",description:"This one is self-explanatory."},universe:{src:"meditativeclocks/clocks/universe_clock/index.html",title:"Universe Clock",description:"The small triangle is time passed since the Big Bang. The large, open triangle is time left till the end of time. The scale is logarithmic\u2014the next pixel will appear in 86 billion years."},serendipity:{src:"meditativeclocks/clocks/serendipity/index.html",title:"Serendipity on Demand",description:"This clock utters a special sound, up to three times every 24 hours, at random intervals, thus connecting moments in life that otherwise wouldn't have been connected."}};let O=null,ke="",Me="",Ae="",q=null;function ct(e){const t=at[e];if(!t)return;const n=document.getElementById("clockModal"),o=document.getElementById("modalIframe"),r=document.getElementById("modalTitle"),s=document.getElementById("modalDescription");if(!n||!o||!r||!s)return;O&&(clearTimeout(O),O=null),q&&(clearTimeout(q),q=null);const l=n.classList.contains("active");if(!l){ke=document.body.style.overflow,Me=document.body.style.paddingRight,Ae=document.documentElement.style.overflow;const v=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",v>0&&(document.body.style.paddingRight=`${v}px`),n.classList.add("active")}o.classList.remove("loaded"),o.onload=null;function u(){o.onload=()=>{n.classList.contains("active")&&o.classList.add("loaded")},o.src=t.src,r.textContent=t.title,s.textContent=t.description}l?q=setTimeout(()=>{q=null,u()},320):requestAnimationFrame(u)}function le(){const e=document.getElementById("clockModal"),t=document.getElementById("modalIframe");!e||!t||(t.onload=null,t.classList.remove("loaded"),e.classList.remove("active"),O&&clearTimeout(O),O=window.setTimeout(()=>{t.src="",O=null,document.body.style.overflow=ke,document.body.style.paddingRight=Me,document.documentElement.style.overflow=Ae},320))}(function(){const t=document.getElementById("clockModal");if(!t)return;const n=document.getElementById("clockModalClose");n&&n.addEventListener("click",le),document.addEventListener("keydown",o=>{o.key==="Escape"&&le()}),t.addEventListener("click",o=>{o.target&&o.target.id==="clockModal"&&le()}),document.querySelectorAll("[data-clock]").forEach(o=>{o.addEventListener("click",()=>{const r=o.getAttribute("data-clock");r&&ct(r)})})})(),function(){const t=document.getElementById("carouselTrack");if(!t)return;const n=t.querySelectorAll(".carousel-item"),o=document.querySelectorAll(".carousel-dot"),r=document.getElementById("carouselPrev"),s=document.getElementById("carouselNext");let l=0;function u(){t.style.transform=`translateX(-${l*100}%)`,o.forEach((w,b)=>w.classList.toggle("active",b===l))}function v(w){n.length&&(w<0&&(w=n.length-1),w>=n.length&&(w=0),l=w,u())}r?.addEventListener("click",()=>v(l-1)),s?.addEventListener("click",()=>v(l+1)),o.forEach(w=>{w.addEventListener("click",()=>v(parseInt(w.dataset.index)))});let p=0;t.addEventListener("touchstart",w=>{p=w.touches[0].clientX},{passive:!0}),t.addEventListener("touchend",w=>{const b=p-w.changedTouches[0].clientX;Math.abs(b)>50&&v(l+(b>0?1:-1))},{passive:!0});let m=!1,h=0,y=!1;t.addEventListener("mousedown",w=>{m=!0,y=!1,h=w.clientX,t.style.cursor="grabbing"}),document.addEventListener("mousemove",w=>{m&&Math.abs(h-w.clientX)>10&&(y=!0)}),document.addEventListener("mouseup",w=>{if(!m)return;m=!1,t.style.cursor="";const b=h-w.clientX;Math.abs(b)>50&&v(l+(b>0?1:-1))}),t.addEventListener("click",w=>{y&&(w.stopPropagation(),y=!1)},!0),u()}(),function(){const t=document.getElementById("works");if(!t)return;const n=Array.from(t.querySelectorAll("iframe.clock-preview-iframe"));if(!n.length)return;function o(){n.forEach(s=>{const l=s.getAttribute("data-src"),u=s.getAttribute("src")||"";l&&(u&&u!=="about:blank"||s.setAttribute("src",l))})}if(!("IntersectionObserver"in window)){o();return}const r=new IntersectionObserver(s=>{const l=s&&s[0];l&&l.isIntersecting&&(o(),r.disconnect())},{rootMargin:"2000px 0px 2000px 0px",threshold:0});r.observe(t)}();const i={startTime:Date.now(),lastActivity:Date.now(),lastClickTime:null,clicks:0,keysPressed:0,touches:0,lastKey:null,pointerX:0,pointerY:0,lastPointerX:0,lastPointerY:0,lastPointerTime:Date.now(),pointerVelocity:0,lastScrollY:0,scrollY:0,scrollDepth:0,scrollDir:null,viewport:"",orientation:"",netRequests:0,maxScrollY:0,clipboardEvents:0,selections:0,lastSelection:"",domMutations:0,elementsSeen:0,resizeEvents:0,longTasks:0,cumulativeLayoutShift:0,seenElements:new Set},lt=crypto.randomUUID?.()||Math.random().toString(36).substr(2,15);function dt(e){return{m:document.getElementById("m_"+e),d:document.getElementById("d_"+e)}}function a(e,t){const n=dt(e);n.m&&(n.m.textContent=t),n.d&&(n.d.textContent=t)}if(a("sessionId",lt.substring(0,8)),a("screen",`${screen.width}\xD7${screen.height}`),a("pixelRatio",window.devicePixelRatio.toFixed(1)+"x"),a("cpuCores",navigator.hardwareConcurrency||"\u2014"),a("deviceMemory",navigator.deviceMemory?navigator.deviceMemory+"GB":"\u2014"),a("platform",navigator.userAgentData?.platform||navigator.platform||"\u2014"),a("language",navigator.language),a("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone),a("themePref",window.matchMedia("(prefers-color-scheme: dark)").matches?"DARK":"LIGHT"),a("colorDepth",screen.colorDepth+"bit"),a("maxTouch",navigator.maxTouchPoints||0),a("reduceMotion",window.matchMedia("(prefers-reduced-motion: reduce)").matches?"YES":"NO"),a("historyLen",history.length),a("referrer",document.referrer||"direct"),navigator.storage?.estimate&&navigator.storage.estimate().then(e=>{const t=e.usage?(e.usage/1024/1024).toFixed(1)+"MB":"\u2014",n=e.quota?(e.quota/1024/1024/1024).toFixed(1)+"GB":"\u2014";a("storageUsed",t),a("storageQuota",n)}),window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(a("pageLoad",Math.round(e.loadEventEnd)+"ms"),a("domReady",Math.round(e.domContentLoadedEventEnd)+"ms")),performance.getEntriesByType("paint").forEach(n=>{n.name==="first-paint"&&a("firstPaint",Math.round(n.startTime)+"ms"),n.name==="first-contentful-paint"&&a("fcp",Math.round(n.startTime)+"ms")})},0)}),window.PerformanceObserver){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];a("lcp",Math.round(o.startTime)+"ms")}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.hadRecentInput||(i.cumulativeLayoutShift+=n.value,a("cls",i.cumulativeLayoutShift.toFixed(3)))}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{i.longTasks+=t.getEntries().length,a("longTasks",i.longTasks)}).observe({type:"longtask"})}catch{}}function Pe(){if(performance.memory){const e=(performance.memory.usedJSHeapSize/1024/1024).toFixed(1);a("jsHeap",e+"MB")}}Pe();function Q(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;a("connection",e?.effectiveType?.toUpperCase()||"\u2014"),a("online",navigator.onLine?"YES":"NO"),a("rtt",typeof e?.rtt=="number"?Math.round(e.rtt)+"ms":"\u2014")}Q(),window.addEventListener("online",Q),window.addEventListener("offline",Q),navigator.connection&&navigator.connection.addEventListener("change",Q);let de=null,ue=null;function ut(){de===null&&(de=Math.round(performance.now()),a("ttfs",de+"ms"))}function mt(){ue===null&&(ue=Math.round(performance.now()),a("ttfi",ue+"ms"))}if(["pointerdown","keydown","touchstart","mousedown"].forEach(e=>{window.addEventListener(e,mt,{capture:!0,once:!0,passive:!0})}),window.PerformanceObserver){try{new PerformanceObserver(t=>{i.netRequests+=t.getEntries().length}).observe({type:"resource",buffered:!0})}catch{}i.netRequests=performance.getEntriesByType("resource").length}function k(){i.lastActivity=Date.now()}function De(e){const t=Math.round(e.clientX??e.touches?.[0]?.clientX??0),n=Math.round(e.clientY??e.touches?.[0]?.clientY??0),o=Date.now(),r=(o-i.lastPointerTime)/1e3;if(r>0){const s=t-i.lastPointerX,l=n-i.lastPointerY,u=Math.sqrt(s*s+l*l);i.pointerVelocity=Math.round(u/r)}i.pointerX=t,i.pointerY=n,i.lastPointerX=t,i.lastPointerY=n,i.lastPointerTime=o,k(),T(),he&&window.clearTimeout(he),he=window.setTimeout(()=>{i.pointerVelocity=0,T()},160)}document.addEventListener("mousemove",De),document.addEventListener("touchmove",De),document.addEventListener("click",()=>{i.clicks++,i.lastClickTime=Date.now(),k(),T()}),document.addEventListener("keydown",e=>{i.keysPressed++,i.lastKey=e.key.length===1?e.key:`[${e.key}]`,k(),T()}),document.addEventListener("touchstart",()=>{i.touches++,k(),T()}),document.addEventListener("copy",()=>{i.clipboardEvents++,k(),T()}),document.addEventListener("paste",()=>{i.clipboardEvents++,k(),T()}),document.addEventListener("cut",()=>{i.clipboardEvents++,k(),T()}),document.addEventListener("selectionchange",()=>{const t=document.getSelection()?.toString().trim();t&&t!==i.lastSelection&&(i.selections++,i.lastSelection=t.substring(0,30)+(t.length>30?"...":""),k(),T())});function Be(){i.viewport=`${window.innerWidth}\xD7${window.innerHeight}`,i.orientation=window.innerWidth>window.innerHeight?"LAND":"PORT",T()}Be(),window.addEventListener("resize",()=>{Be(),i.resizeEvents++});function ft(){a("fullscreen",document.fullscreenElement?"YES":"NO")}document.addEventListener("fullscreenchange",ft);function pt(){ut();const e=Math.round(window.scrollY),t=document.documentElement.scrollHeight-window.innerHeight,n=t>0?Math.round(e/t*100):0;e>i.lastScrollY?i.scrollDir="\u2193":e<i.lastScrollY&&(i.scrollDir="\u2191"),i.lastScrollY=e,i.scrollY=e,i.scrollDepth=n,e>i.maxScrollY&&(i.maxScrollY=e),k(),T()}document.addEventListener("scroll",pt,{passive:!0});function me(){a("tabFocus",document.hasFocus()?"YES":"NO")}function Oe(){a("visibility",document.visibilityState==="visible"?"YES":"NO")}me(),Oe(),window.addEventListener("focus",me),window.addEventListener("blur",me),document.addEventListener("visibilitychange",Oe);function fe(e){a("pageState",e)}document.addEventListener("freeze",()=>fe("FROZEN")),document.addEventListener("resume",()=>fe("ACTIVE")),document.addEventListener("visibilitychange",()=>{fe(document.visibilityState==="hidden"?"HIDDEN":"ACTIVE")}),new MutationObserver(e=>{i.domMutations+=e.length}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0});const ht=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&!i.seenElements.has(t.target)&&(i.seenElements.add(t.target),i.elementsSeen++)})},{threshold:.5});document.querySelectorAll("section, h1, h2, p, footer").forEach(e=>{ht.observe(e)});const R=document.getElementById("desktopHud"),wt=new ResizeObserver(()=>{i.resizeEvents++});R&&wt.observe(R);function vt(e){const t=Math.floor(e/1e3),n=String(Math.floor(t/3600)).padStart(2,"0"),o=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(t%60).padStart(2,"0");return`${n}:${o}:${r}`}var J=!0,pe=0,he=0;function we(){return J&&document.visibilityState==="visible"}function V(){if(!we())return;const e=Date.now();a("sessionTime",vt(e-i.startTime)),a("localTime",new Date().toLocaleTimeString());const t=Math.floor((e-i.lastActivity)/1e3);a("idleTime",t+"s"),a("pointerPos",`${i.pointerX}, ${i.pointerY}`),a("clicks",i.clicks),a("keysPressed",i.keysPressed),a("touches",i.touches),a("netRequests",i.netRequests),a("domMutations",i.domMutations),a("scrollY",i.scrollY+"px"),a("scrollDepth",i.scrollDepth+"%"),a("scrollDir",i.scrollDir||"\u2014"),a("viewport",i.viewport||`${window.innerWidth}\xD7${window.innerHeight}`),a("orientation",i.orientation||(window.innerWidth>window.innerHeight?"LAND":"PORT")),a("pointerVelocity",i.pointerVelocity+" px/s"),a("lastKey",i.lastKey||"\u2014"),a("lastClickTime",i.lastClickTime?Math.floor((e-i.lastClickTime)/1e3)+"s ago":"\u2014"),a("clipboardEvents",i.clipboardEvents),a("selections",i.selections),a("elementsSeen",i.elementsSeen),a("resizeEvents",i.resizeEvents),a("lastSelection",i.lastSelection||"\u2014"),Pe()}function T(){we()&&(pe||(pe=requestAnimationFrame(()=>{pe=0,V()})))}(function(){const t=document.getElementById("heroLayer");if(!t||!("IntersectionObserver"in window))return;new IntersectionObserver(o=>{const r=o&&o[0],s=!!(r&&r.isIntersecting&&r.intersectionRatio>.12);s!==J&&(J=s,J&&V())},{threshold:[0,.12,.25,.5]}).observe(t)})(),window.setInterval(()=>{we()&&V()},1e3),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&V()}),V();const ee=document.getElementById("hudToggle");let z=!0;function te(){if(z&&R){const e=R.offsetHeight;ee.style.top=e+8+"px"}else ee.style.top="0.5rem"}te(),ee.addEventListener("click",()=>{z=!z,R.classList.toggle("collapsed",!z),ee.textContent=z?"[HIDE]":"[SHOW]",te()}),window.addEventListener("resize",te),R&&new ResizeObserver(te).observe(R);const M=document.getElementById("stickyNav"),$=document.getElementById("works"),H=document.getElementById("dissolve-container"),Re=document.getElementById("reveal"),F=document.getElementById("revealText");let ne=0,W=!1,He=!1,Fe=!1,ve=null;const gt=5e3;let N=null;function Ne(){const e=!!(He||Fe);e!==W&&(W=e,W?bt():M?.classList.remove("visible"))}function _e(){M&&M.classList.contains("visible")&&(N&&window.clearTimeout(N),N=window.setTimeout(()=>{M.classList.remove("visible")},gt))}function yt(){N&&(window.clearTimeout(N),N=null)}function bt(){M&&(ve&&window.clearTimeout(ve),ve=window.setTimeout(()=>{W&&(M.classList.add("visible"),_e())},0))}const Et=Array.from(document.querySelectorAll("#stickyNav [data-nav]")),x=document.querySelector("#aboutTerminal .about-terminal-embed");let Ye=!1,qe=!1,D=!1,X="works";function Ve(){if(Ye||!x)return;const e=x.getAttribute("data-src");e&&(x.addEventListener("load",function t(){x.removeEventListener("load",t),x.classList.add("loaded")}),x.src=e,Ye=!0)}(function(){const t=document.getElementById("about");if(!t||!("IntersectionObserver"in window))return;const n=new IntersectionObserver(o=>{o[0]?.isIntersecting&&(Ve(),n.disconnect())},{rootMargin:"1200px 0px 1200px 0px",threshold:0});n.observe(t)})();function ze(){if(D||!x)return!1;try{const e=x.contentWindow;if(e&&typeof e.__startCombinedTerminal=="function")return e.__startCombinedTerminal(),D=!0,!0}catch{}try{x.contentWindow?.postMessage({type:"START_TERMINAL_ANSI_COMBINED"},"*")}catch{}return!1}function ge(){if(D||!x||ze())return;const t=2500,n=100,o=Date.now();(function r(){D||X==="about"&&(Date.now()-o>t||ze()||window.setTimeout(r,n))})()}function Yt(){if(qe||D||!x)return;qe=!0;let e=!1;x.addEventListener("load",()=>{X==="about"&&(D||e&&ge())});let t=0;function n(){if(t=0,D)return;if(X!=="about"){t=requestAnimationFrame(n);return}const o=x.getBoundingClientRect(),r=window.innerHeight*.5;if(!e&&o.top<=r&&o.bottom>0){e=!0,!D&&X==="about"&&ge();return}t=requestAnimationFrame(n)}t=requestAnimationFrame(n)}function $e(e){X=e,Et.forEach(t=>t.classList.toggle("active",t.getAttribute("data-nav")===e)),e==="about"&&(Ve(),ge())}$e("works"),function(){if(!("IntersectionObserver"in window))return;const t=new IntersectionObserver(o=>{const r=o[0];He=!r.isIntersecting&&r.boundingClientRect.top<0,Ne()},{threshold:0});if(Re&&t.observe(Re),$){const o=$;new IntersectionObserver(s=>{const l=s&&s[0];l&&(l.isIntersecting?$.classList.add("works-visible"):$.classList.remove("works-visible"),Fe=!!l.isIntersecting,Ne())},{rootMargin:"-33% 0px -66% 0px",threshold:0}).observe(o)}const n=new IntersectionObserver((o,r)=>{const s=window.innerHeight/2;let l=null,u=1/0;r.takeRecords(),["works","about","contact"].forEach(v=>{const p=document.getElementById(v);if(!p)return;const m=p.getBoundingClientRect();if(m.bottom<0||m.top>window.innerHeight)return;const h=m.top+m.height/2,y=Math.abs(h-s);y<u&&(u=y,l=v)}),l&&$e(l)},{rootMargin:"0px 0px -40% 0px",threshold:[.05,.15]});["works","about","contact"].forEach(o=>{const r=document.getElementById(o);r&&n.observe(r)})}();function ye(e){let t=0;return function(...o){t||(t=requestAnimationFrame(()=>{t=0,e.apply(this,o)}))}}const St=F.getBoundingClientRect().top+window.scrollY+F.offsetHeight;let be=0;function xt(){const e=window.scrollY,t=window.innerHeight*.33;if(H){const n=H.getBoundingClientRect();if(n.bottom>0&&n.top<window.innerHeight){F.classList.remove("hidden"),be=e;return}}e>St-t&&e>be?F.classList.add("hidden"):F.classList.remove("hidden"),be=e}const It=ye(xt);window.addEventListener("scroll",It,{passive:!0});let _=window.scrollY,We=0,Xe=_,Ee=0,oe=!1;window.addEventListener("touchstart",()=>{oe=!0},{passive:!0}),window.addEventListener("touchend",()=>{oe=!1},{passive:!0}),window.addEventListener("touchcancel",()=>{oe=!1},{passive:!0});function Tt(){const e=window.scrollY;if(!W){_=e,ne=e;return}const t=e-_;if(Math.abs(t)<4)return;const n=t>0?1:-1;if(n!==We&&(We=n,Xe=e),Math.abs(e-Xe)<24){_=e,ne=e;return}if(n>0)M.classList.contains("visible")||(M.classList.add("visible"),$?.classList.add("works-visible"),Ee=Date.now()),_e();else{const r=Ee&&Date.now()-Ee<450,s=!!(window.matchMedia&&window.matchMedia("(pointer: coarse)").matches);if(r||s&&!oe){_=e,ne=e;return}M.classList.remove("visible"),yt()}_=e,ne=e}const Lt=ye(Tt);window.addEventListener("scroll",Lt,{passive:!0});const ie=document.getElementById("heroHud"),Vt=document.getElementById("reveal"),Se=document.getElementById("heroLayer"),U=document.getElementById("revealLayer"),L=ie?.querySelector(".hud-container");let xe=1;function Ct(){if(!ie||!L)return;const e=getComputedStyle(ie),t=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),n=ie.clientHeight-t;if(n<=0)return;const r=(L.getBoundingClientRect().height||0)/(xe||1);if(r<=0)return;let s=n/r;if(s=Math.min(1,Math.max(.55,s)),Math.abs(s-xe)<.01)return;xe=s,typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("zoom","1")?(L.style.zoom=String(s),L.style.transform="",L.style.width=""):(L.style.zoom="",L.style.transformOrigin="top center",L.style.transform=`scale(${s})`,L.style.width=`${100/s}%`)}function se(){requestAnimationFrame(()=>requestAnimationFrame(Ct))}window.addEventListener("resize",se),document.fonts?.ready?.then(se),window.ResizeObserver&&L&&new ResizeObserver(se).observe(L),se();let Ie=window.innerHeight,Ue=window.innerHeight,G=0,Te=1,Ge=1,re=!1;function kt(){return window.visualViewport?.height||window.innerHeight}function je(e){return e<0?0:e>1?1:e}function Mt(e){return e*e*(3-2*e)}function j(e){const t=je(e);Se.style.opacity=String(1-t),U.style.opacity=String(t),t>=1?U.classList.add("active"):U.classList.remove("active")}function Ze(){if(!H)return;Ie=kt();const e=H.offsetHeight||0,t=Math.max(1,e-Ie);Ue=Math.min(Ie,t),G=H.getBoundingClientRect().top+window.scrollY,Te=G+Ue,Ge=1/Math.max(1,Te-G)}function Ke(){const t=(window.scrollY-G)*Ge,n=Mt(je(t));j(n)}const Qe=ye(Ke);function Je(){re||(re=!0,window.addEventListener("scroll",Qe,{passive:!0}),Se.style.willChange="opacity",U.style.willChange="opacity")}function At(){re&&(re=!1,window.removeEventListener("scroll",Qe),Se.style.willChange="",U.style.willChange="")}function et(){const e=window.scrollY;e<=G?j(0):e>=Te?j(1):Ke()}function tt(){Ze(),et()}tt(),window.addEventListener("resize",tt,{passive:!0}),"IntersectionObserver"in window&&H?new IntersectionObserver(t=>{const n=t&&t[0];n&&(n.isIntersecting?(Ze(),Je(),et()):(At(),n.boundingClientRect.top<0?j(1):j(0)))},{rootMargin:"200px 0px 200px 0px",threshold:0}).observe(H):Je()});})();
